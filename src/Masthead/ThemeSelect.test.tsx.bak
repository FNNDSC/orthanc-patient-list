import "@testing-library/jest-dom";
import { fireEvent, render } from "@testing-library/preact";
import { expect, test } from "vitest";
import { ThemeSelect, themePreference } from "./ThemeSelect";

test("Can set dark theme", () => {
	const { queryByText, getByLabelText, getByText, container, getByTestId } =
		render(<ThemeSelect />);

	// menu should not be visible right now
	expect(queryByText("Always use dark theme")).toBeNull();
	// dark theme should not be the default
	expect(document.documentElement.classList.contains("pf-v6-theme-dark")).toBe(
		false,
	);

	fireEvent.click(container.firstChild);
	expect(queryByText("Always use dark theme")).toBeVisible();

	fireEvent.change(queryByText("Dark"));
	fireEvent.click(queryByText("Dark"));
	fireEvent.select(queryByText("Dark"));
	fireEvent.submit(queryByText("Dark"));
	fireEvent.mouseDown(queryByText("Dark"));
	fireEvent.mouseUp(queryByText("Dark"));
	// expect(themePreference.value).toBe("dark");
	// expect(document.documentElement.classList.contains("pf-v6-theme-dark")).toBe(
	// 	true,
	// );

	// localStorage.getItem()
	// const myComponent = screen.getByTestId("my-component");
	// expect(myComponent).toBeInTheDocument();
});
